<!-- frontend/src/app/components/upload-foto/upload-foto.component.html -->

<div class="upload-foto-container">
  <h3>Foto del Animal</h3>

  <div *ngIf="previsualizacion" class="preview-container">
    <img [src]="previsualizacion" alt="Vista previa" class="preview-image">
    <button (click)="limpiarFoto()" class="btn-limpiar" type="button">âœ•</button>
  </div>

  <div class="botones-upload" *ngIf="!mostrarWebcam && !previsualizacion">
    <button (click)="abrirSelectorArchivos()" class="btn-upload" type="button">
      ğŸ“ Desde equipo
    </button>
    <button (click)="activarWebcam()" class="btn-webcam" type="button">
      ğŸ“· Tomar foto
    </button>
  </div>

  <input 
    #fileInput
    type="file" 
    accept="image/*" 
    capture="environment"
    (change)="onFileSelected($event)"
    style="display: none"
  >

  <div *ngIf="mostrarWebcam" class="webcam-container">
    <video #videoElement autoplay playsinline class="video-preview"></video>
    <div class="webcam-buttons">
      <button (click)="capturarFoto()" class="btn-capturar" type="button">ğŸ“¸ Capturar</button>
      <button (click)="cerrarWebcam()" class="btn-cancelar" type="button">âŒ Cancelar</button>
    </div>
  </div>

  <canvas #canvas style="display: none;"></canvas>
</div>
